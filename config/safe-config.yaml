# å®‰å…¨çš„ Clash.Meta é…ç½®æ–‡ä»¶
# ç¡®ä¿ä»£ç†ä¸å¯ç”¨æ—¶ä¸ä¼šå¯¼è‡´æ–­ç½‘

mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
external-controller: 127.0.0.1:9090
secret: ""

# DNS é…ç½® - å¤šå±‚å¤‡ç”¨
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: redir-host
  nameserver:
    - 223.5.5.5      # é˜¿é‡Œ DNS
    - 119.29.29.29   # è…¾è®¯ DNS
  fallback:
    - 8.8.8.8        # Google DNS
    - 1.1.1.1        # Cloudflare DNS
    - 208.67.222.222 # OpenDNS

# é€æ˜ä»£ç†é…ç½® - é»˜è®¤å…³é—­
tun:
  enable: false  # ğŸ”¹ é»˜è®¤å…³é—­é€æ˜ä»£ç†ï¼Œç”¨æˆ·æ‰‹åŠ¨å¼€å¯
  stack: system
  dns-hijack:
    - any:53
  auto-route: true
  auto-detect-interface: true
  # å¯ç”¨æ•…éšœè½¬ç§»
  strict-route: false

# ä»£ç†é…ç½®
proxies:
  - name: "DIRECT"
    type: direct

# ä»£ç†ç»„é…ç½® - å…³é”®çš„æ•…éšœè½¬ç§»è®¾ç½®
proxy-groups:
  - name: "Proxy"
    type: fallback           # ğŸ”¹ æ•…éšœè½¬ç§»æ¨¡å¼
    proxies:
      - "auto-select"
      - "DIRECT"             # ğŸ”¹ æœ€åå¤‡ç”¨ç›´è¿
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    
  - name: "auto-select"
    type: url-test           # ğŸ”¹ è‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„
    proxies:
      - "DIRECT"             # ğŸ”¹ åŒ…å«ç›´è¿ä½œä¸ºå¤‡é€‰
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 100

# å®‰å…¨çš„è§„åˆ™é…ç½®
rules:
  # æœ¬åœ°ç½‘ç»œç›´è¿ - ç¡®ä¿ç®¡ç†è®¿é—®
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  
  # Proxmox ç®¡ç†ç«¯å£ç›´è¿
  - DST-PORT,8006,DIRECT
  - DST-PORT,22,DIRECT
  
  # å›½å†…ç½‘ç«™ç›´è¿
  - DOMAIN-SUFFIX,cn,DIRECT
  - DOMAIN-SUFFIX,baidu.com,DIRECT
  - DOMAIN-SUFFIX,qq.com,DIRECT
  - DOMAIN-SUFFIX,taobao.com,DIRECT
  - DOMAIN-SUFFIX,alibaba.com,DIRECT
  
  # éœ€è¦ä»£ç†çš„ç½‘ç«™
  - DOMAIN-SUFFIX,google.com,Proxy
  - DOMAIN-SUFFIX,facebook.com,Proxy
  - DOMAIN-SUFFIX,youtube.com,Proxy
  - DOMAIN-SUFFIX,twitter.com,Proxy
  - DOMAIN-SUFFIX,github.com,Proxy
  - DOMAIN-SUFFIX,githubusercontent.com,Proxy
  
  # ğŸ”¹ å…³é”®ï¼šæœ€åçš„å…œåº•è§„åˆ™ - ç¡®ä¿æ€»æ˜¯èƒ½è¿ç½‘
  - MATCH,DIRECT
